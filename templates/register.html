{% extends "layout.html" %}

{% block head %}
    <title>Register</title>
{% endblock %}

{% block body %}
<div class="d-flex flex-column">
    <h2>Register</h2>
    <form id="registerForm" action="/register" method="post" onsubmit="return validateRegisterForm()">
        {{ form.hidden_tag() }} <!-- Include CSRF token -->
        <div class="form-group">
            {{ form.username(class="form-control", id="username", placeholder="Username") }}
        </div>
        <div class="form-group">
            {{ form.password(class="form-control", id="password", placeholder="Password") }}
        </div>
        <button class="btn btn-primary" type="submit">Register</button>
    </form>
</div>

<script src="{{ url_for('static', filename='validation.js') }}"></script>
<script>
function validateRegisterForm() {
    var username = document.getElementById("username").value;
    var password = document.getElementById("password").value;

    // Regular expressions for validation
    var usernameRegex = /^[a-zA-Z0-9]{4,20}$/;
    var passwordRegex = /^.{8,}$/;

    // Check if inputs match the patterns
    if (!usernameRegex.test(username)) {
        alert("Username must be 4-20 characters and alphanumeric");
        return false;
    }
    if (!passwordRegex.test(password)) {
        alert("Password must be at least 8 characters");
        return false;
    }
    return true;
}
</script>
{% endblock %}
